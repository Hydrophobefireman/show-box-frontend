(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{294:function(e,t,s){"use strict";var n=s(5),a=s.n(n),i=s(12),r=s.n(i),o=s(20),c=s(7),u=s(33);class d{__defaultOnMessage(e){if(["ping","pong"].includes(e.data))return;const t=JSON.parse(e.data);this._socketID=t.socket_id}startConn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((s,n)=>{this.socket=new WebSocket(Object(u.e)(e)),this.socket.onopen=(()=>{this.socket.onmessage=this.__defaultOnMessage,t&&this._pingPongs(),s(this.socket)}),this.socket.onerror=(e=>n(e))})}close(){try{this.socket.close()}catch(e){console.warn(e)}}send(e){return this.socket.send(JSON.stringify(e))}sendString(e){return this.socket.send(e)}set onmessage(e){this.socket.onmessage=(t=>{const s=JSON.parse(t.data||"{}");return"ping"===s.type||"pong"===s.type?void 0:e(s)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}_pingPongs(){this.pingtimer=setTimeout(()=>{this.socket.readyState===this.socket.OPEN?(this.send({type:"ping"}),this._pingPongs()):clearTimeout(this.pingtimer)},2e4)}constructor(){}}let h;const p=()=>(h||{}).isUsable?h:h=new d;var l=s(51);s.d(t,"b",function(){return b}),s.d(t,"a",function(){return m});const b=e=>void(document.title=e);class k extends o.b{update(){const e=this.getState.value;b(e?`Search for ${e}`:window.oldTitle),this.setDomAttrs({value:e},!1).updateDOMAttrs()}appendComponentOnResponse(e){this.socket.onmessage=this.onResponse=e.bind(this)}handleInput(e){var t=this;return r()(a.a.mark(function s(){var n,i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=e.target.value,t.setState({value:n}),"/search/"===Object(l.b)(window.location.href).route&&Object(l.c)("q",n),!t.socket.isConnected&&t.socket.isUsable&&t.useSocket&&t.socket.startConn("suggestqueries",!1),(i=n.trim())&&t.useSocket&&t.socket.sendString(i);case 7:case"end":return s.stop()}},s,this)}))()}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}constructor(e){super("input",{value:""},[],{className:["paper-input"]}),this.useSocket=!!e,this.onResponse=(()=>void 0),this.socket={},e&&(this.socket=p(),this.beforeRender=(()=>{this.onResponse()}),this.onAttached=(()=>{!this.socket.isConnected&&this.socket.isUsable&&this.socket.startConn("suggestqueries",!1)})),this.attachEventListener("input",this.handleInput.bind(this)).attachEventListener("focus",this.handleFocus.bind(this)).attachEventListener("blur",this.handleBlur.bind(this))}}class v extends o.b{constructor(e){super("div",{},[new c.b(e)],{className:"_animate"})}update(){this.updateChildren(),(this.getState.value||"").trim()||this.getState.isFocused?this.addClassName("moveup").removeClassName("movedown"):this.removeClassName("moveup").addClassName("movedown"),this.updateDOMAttrs()}}const m=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=new v(e),n=new k(t).bindData("value",s,"value",!1).bindData("isFocused",s,"isFocused",!1);return{component:new o.b("div",{},[s,n],{className:["search-component"]}),inputComponent:n,animatedInputComponent:s}}},301:function(e,t,s){"use strict";s.r(t);var n=s(5),a=s.n(n),i=s(12),r=s.n(i),o=s(20),c=s(7),u=s(294),d=s(88),h=s(51),p=s(33);const l=e=>{const t=btoa(e);return Object(p.g)(t).split("").reverse().join("")},b=Object(u.a)("Press enter to search",!1),k=b.inputComponent,v=new o.b("div",{},[b.component]),m=(e,t)=>{e.attachEventListener("click",r()(a.a.mark(function e(){var s,n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(`/api/add/tv-show/lookup?${Object(h.d)({s:l(this.getState.url),t:this.getState.title})}`);case 2:return s=e.sent,e.next=5,s.text();case 5:n=e.sent,v.destroyChildComponents(!1,!0),v.$element.appendChild(new c.b(n)),(i=document.createElement("a")).href=`#/search?${Object(h.d)({q:t})}`,i.style.margin="auto",i.style.display="block",i.innerHTML=`Search for ${t}`,v.$element.appendChild(i);case 14:case"end":return e.stop()}},e,this)})).bind(e))};function g(){return(g=r()(a.a.mark(function e(t){var s,n,i,r,u,p,l,b,k,g,f,w,S,C,O;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=46;break}if((s=c.b.find("$$",v.$element)[0])&&s.remove(),!(n=(t.target.value||"").trim())){e.next=46;break}return e.prev=5,e.next=8,d.a.get(`/media/add-shows/fetch/?${Object(h.d)({s:n})}`,!0);case 8:return r=e.sent,e.next=11,r.json();case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:u=e.t0,i=u.shows,e.next=20;break;case 18:e.prev=18,e.t1=e.catch(5);case 20:if(!i||!i.length){e.next=45;break}for(p=[],l=!0,b=!1,k=void 0,e.prev=25,g=i[Symbol.iterator]();!(l=(f=g.next()).done);l=!0)w=f.value,S=w.title,C=w.url,O=new o.b("div",{url:C,title:S},[new c.b(S)],{style:"width:65%;margin:auto;text-decoration:underline;cursor:pointer"}),m(O,S),p.push(O);e.next=33;break;case 29:e.prev=29,e.t2=e.catch(25),b=!0,k=e.t2;case 33:e.prev=33,e.prev=34,l||null==g.return||g.return();case 36:if(e.prev=36,!b){e.next=39;break}throw k;case 39:return e.finish(36);case 40:return e.finish(33);case 41:v.addChild(new o.b("div",{},p),!1),v.update(),e.next=46;break;case 45:return e.abrupt("return",v.$element.appendChild(new c.b("No Results found","$$")));case 46:case"end":return e.stop()}},e,this,[[5,18],[25,29,33,41],[34,,36,40]])}))).apply(this,arguments)}k.attachEventListener("keydown",function(e){return g.apply(this,arguments)}.bind(k)),t.default=v}}]);