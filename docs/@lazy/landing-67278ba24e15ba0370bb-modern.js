(window.webpackJsonp=window.webpackJsonp||[]).push([[2,10],{13:function(t,e,s){"use strict";s.r(e),s.d(e,"Requests",(function(){return o}));var n=s(2);const o={async get(t,e=!0,s={}){let o;return o=e?`${n.a}${t}`:t,await fetch(o,{headers:s,credentials:"include"})},async post(t,e=!0,s,o={"content-type":"application/x-www-form-urlencoded"}){let r,i;return i="application/json"===o["content-type"].toLowerCase()&&"object"==typeof s?JSON.stringify(s):s,r=e?`${n.a}${t}`:t,await fetch(r,{method:"post",body:i,headers:o,credentials:"include"})}}},14:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var n=s(0);function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class r extends n.i{constructor(...t){super(...t),o(this,"state",{isFocused:!1,value:""}),o(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0})),o(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1})),o(this,"onInput",t=>this.setState({value:t.target.value})),o(this,"onSubmit",()=>this.props.onSubmit(this.state.value))}render({id:t,buttonText:e="search",labelText:s="search for shows",onInput:o,wssResponse:r},{isFocused:a}){const c=["_animate",a?"moveup":"movedown"];return Object(n.h)("div",{class:"search-component"},Object(n.h)("form",{action:"javascript:",onSubmit:this.onSubmit},Object(n.h)("label",{class:c,for:t},s),Object(n.h)(i,{onFocus:this.onFocus,onBlur:this.onBlur,id:t,onInput:t=>{this.onInput(t),null!=o&&o(t)}}),r,Object(n.h)("button",{class:"search-button"},e)))}}function i({onFocus:t,onBlur:e,onInput:s,id:o}){return Object(n.h)("input",{onFocus:t,onBlur:e,onInput:s,id:o,class:"paper-input"})}},15:function(t,e,s){"use strict";var n=s(0),o=s(14),r=s(2);class i{__defaultOnMessage(t){if(["ping","pong"].includes(t.data))return;const e=JSON.parse(t.data);this._socketID=e.socket_id}startConn(t){return this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)?this.socket:new Promise((e,s)=>{this.socket=new WebSocket(Object(r.h)(t)),this.socket.onopen=()=>{this.socket.onmessage=this.__defaultOnMessage,e(this.socket)},this.socket.onerror=t=>s(t)})}close(){try{this.socket.close()}catch(t){console.warn(t)}}send(t){return this.socket.send(JSON.stringify(t))}sendString(t){return this.socket.send(t)}set onmessage(t){t!==this._onmessage&&(this._onmessage=t,this.socket.onmessage=t=>{const e=JSON.parse(t.data||"{}");return"ping"===e.type||"pong"===e.type?void 0:this._onmessage(e)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}let a;const c=()=>(a||{}).isUsable?a:a=new i;function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}let h;class l extends n.i{constructor(...t){super(...t),u(this,"state",{resp:[],prevVal:""}),u(this,"onMessage",t=>{t.data?this.setState({resp:t.data.map(t=>({movie:t.movie,href:Object(r.e)(t.id,t.movie)}))}):this.setState({resp:[]})}),u(this,"componentWillUpdate",Object(r.b)(this.fetchResponses,100,!1,this)),u(this,"componentWillMount",this.componentWillUpdate)}async fetchResponses(){const t=this.props.val;t!=this.state.prevVal&&t?(console.log("fetching"),this.setState({prevVal:t}),h=c(),await h.startConn("suggestqueries"),h.onmessage=this.onMessage,h.sendString(t)):this.state.resp.length&&!t&&this.setState({resp:[],prevVal:""})}render(){const t=["response-parent"];return this.state.resp.length&&t.push("has-data"),Object(n.h)("div",{class:t},this.state.resp.map(t=>Object(n.h)(n.a,{class:["movie-link","query-response"],href:t.href},Object(r.c)(t.movie))))}}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return p}));class p extends n.i{constructor(...t){super(...t),d(this,"state",{value:""}),d(this,"onInput",t=>{const e=(t.target.value||"").trim();document.title=e?`Search for ${e}`:r.d,this.setState({value:e})}),d(this,"loadSearchResults",()=>{const t=(this.state.value||"").trim();t&&Object(r.g)(t),this.setState({value:""})})}componentWillMount(){c().startConn("suggestqueries")}render(){return Object(n.h)(n.d,null,Object(n.h)(o.a,{id:"landing-search-component",onSubmit:this.loadSearchResults,wssResponse:Object(n.h)(l,{val:this.state.value}),onInput:this.onInput}))}}},16:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return u}));var n=s(0),o=s(13),r=s(2);function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function a(){return Object(n.h)(n.d,null,Object(n.h)("div",{style:{display:"block",marginTop:"50px"}},"Check some of these shows out!"),Object(n.h)(c))}class c extends n.i{constructor(...t){super(...t),i(this,"state",{resp:[]})}componentWillMount(){o.Requests.get("/i/rec/").then(t=>t.json()).then(t=>{this.setState({resp:t.recommendations})})}render(t,{resp:e=[]}){return Object(n.h)("div",{class:"rec-box"},e.map(t=>Object(n.h)(u,{data:t})))}}class u extends n.i{render({data:t={},customOnClick:e}){const s=Object(n.h)(n.d,null,Object(n.h)(h,{thumb:t.thumb?Object(r.f)(t.thumb).then(r.i):null}),Object(n.h)("span",{class:"rec-title"},Object(r.c)(t.movie)));return e?Object(n.h)("div",{class:"rec-wrapper",onClick:()=>e(t.id)},s):function(t,e){return t.id?Object(n.h)(n.a,{class:"rec-wrapper",href:Object(r.e)(t.id,t.movie)},e):Object(n.h)("span",{class:"rec-wrapper"},e)}(t,s)}}class h extends n.i{constructor(...t){super(...t),i(this,"state",{thumb:""}),i(this,"componentDidUpdate",this.componentDidMount)}componentDidMount(t){if(null==this.props.thumb)return this.setState(t=>null!=t&&t.thumb?{thumb:""}:null);this.props.thumb&&this.props.thumb.then&&(!this.state.thumb||t&&t.thumb!==this.props.thumb)&&this.props.thumb.then(t=>t&&this.setState({thumb:t}))}render({},{thumb:t=""}){return Object(n.h)("div",{style:{backgroundImage:t?`url(${t})`:"none"},class:"rec-image"})}}},20:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return c}));var n=s(0),o=s(2),r=s(15),i=s(16);function a(){return Object(n.h)("div",null,"NEW! Add a new show to our databases by yourself",Object(n.h)(n.a,{href:"/media/add/",class:["banner-button","database-linker"]},"Here!"))}class c extends n.i{componentDidMount(){document.title=o.d}render(){return Object(n.h)("section",{data:"index"},Object(n.h)(a),Object(n.h)(r.a),Object(n.h)(i.a))}}}}]);