(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{138:function(t,e,s){"use strict";var n=s(49);e.a="assign"in n.a?n.a.assign:function(t){for(let e=1;e<arguments.length;e++){const s=arguments[e];for(const e in s)n.c.call(s,e)&&(t[e]=s[e])}return t}},223:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var n=s(98);const o={async get(t){let e,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=s?"".concat(n.a).concat(t):t,await fetch(e,{headers:o,credentials:"include"})},async post(t){let e,s,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"content-type":"application/x-www-form-urlencoded"};return s="application/json"===r["content-type"].toLowerCase()&&"object"==typeof i?JSON.stringify(i):i,e=o?"".concat(n.a).concat(t):t,await fetch(e,{method:"post",body:s,headers:r,credentials:"include"})}}},224:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var n=s(5),o=s.n(n),i=s(0);class r extends i.i{constructor(){super(...arguments),o()(this,"state",{isFocused:!1,value:""}),o()(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0})),o()(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1})),o()(this,"onInput",t=>this.setState({value:t.target.value})),o()(this,"onSubmit",()=>this.props.onSubmit(this.state.value))}render(t,e){let{id:s,buttonText:n="search",labelText:o="search for shows",onInput:r,wssResponse:c}=t,{isFocused:h}=e;const u=["_animate",h?"moveup":"movedown"];return Object(i.h)("div",{class:"search-component"},Object(i.h)("form",{action:"javascript:",onSubmit:this.onSubmit},Object(i.h)("label",{class:u,for:s},o),Object(i.h)(a,{onFocus:this.onFocus,onBlur:this.onBlur,id:s,onInput:t=>{this.onInput(t),null!=r&&r(t)}}),c,Object(i.h)("button",{class:"search-button"},n)))}}function a(t){let{onFocus:e,onBlur:s,onInput:n,id:o}=t;return Object(i.h)("input",{onFocus:e,onBlur:s,onInput:n,id:o,class:"paper-input"})}},226:function(t,e,s){"use strict";var n=s(5),o=s.n(n),i=s(0),r=s(224),a=s(98);class c{__defaultOnMessage(t){if(["ping","pong"].includes(t.data))return;const e=JSON.parse(t.data);this._socketID=e.socket_id}startConn(t){return this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)?this.socket:new Promise((e,s)=>{this.socket=new WebSocket(Object(a.h)(t)),this.socket.onopen=()=>{this.socket.onmessage=this.__defaultOnMessage,e(this.socket)},this.socket.onerror=t=>s(t)})}close(){try{this.socket.close()}catch(t){console.warn(t)}}send(t){return this.socket.send(JSON.stringify(t))}sendString(t){return this.socket.send(t)}set onmessage(t){t!==this._onmessage&&(this._onmessage=t,this.socket.onmessage=t=>{const e=JSON.parse(t.data||"{}");return"ping"===e.type||"pong"===e.type?void 0:this._onmessage(e)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}}let h;const u=()=>(h||{}).isUsable?h:h=new c;let l;class d extends i.i{constructor(){super(...arguments),o()(this,"state",{resp:[],prevVal:""}),o()(this,"onMessage",t=>{t.data?this.setState({resp:t.data.map(t=>({movie:t.movie,href:Object(a.e)(t.id,t.movie)}))}):this.setState({resp:[]})}),o()(this,"componentWillUpdate",Object(a.b)(this.fetchResponses,100,!1,this)),o()(this,"componentWillMount",this.componentWillUpdate)}async fetchResponses(){const t=this.props.val;t!=this.state.prevVal&&t?(console.log("fetching"),this.setState({prevVal:t}),l=u(),await l.startConn("suggestqueries"),l.onmessage=this.onMessage,l.sendString(t)):this.state.resp.length&&!t&&this.setState({resp:[],prevVal:""})}render(){const t=["response-parent"];return this.state.resp.length&&t.push("has-data"),Object(i.h)("div",{class:t},this.state.resp.map(t=>Object(i.h)(i.a,{class:["movie-link","query-response"],href:t.href},Object(a.c)(t.movie))))}}s.d(e,"a",(function(){return p}));class p extends i.i{constructor(){super(...arguments),o()(this,"state",{value:""}),o()(this,"onInput",t=>{const e=(t.target.value||"").trim();document.title=e?"Search for ".concat(e):a.d,this.setState({value:e})}),o()(this,"loadSearchResults",()=>{const t=(this.state.value||"").trim();t&&Object(a.g)(t),this.setState({value:""})})}componentWillMount(){u().startConn("suggestqueries")}render(){return Object(i.h)(i.d,null,Object(i.h)(r.a,{id:"landing-search-component",onSubmit:this.loadSearchResults,wssResponse:Object(i.h)(d,{val:this.state.value}),onInput:this.onInput}))}}},229:function(t,e,s){"use strict";var n=s(49);let o=Object(n.e)();const i=Object(n.b)("Map",o),r=(Object(n.b)("Set",o),Object(n.b)("WeakMap",o)&&Object(n.b)("WeakSet",o),"__@@map"),a=t=>t!=t,c=(t,e)=>t===e||a(t)&&a(e),h=t=>0===t?0:t;let u,l,d;if("undefined"!=typeof Symbol){function p(t,e){const s=t[r];let n=0;const o=s.length,i=e?0:1;return{[Symbol.iterator]:function(){return this},next:function(){return n<o?{value:s[n++][i],done:!1}:{value:void 0,done:!0}}}}u=function(){return this[r][Symbol.iterator]()},l=function(){return p(this,!1)},d=function(){return p(this,!0)}}else u=d=l=function(){console.warn("no symbol support")};var b={keys:d,values:l,entries:u},m=s(138);function f(t,e){for(const s of t[r])if(c(s[0],e))return s;return null}function g(t,e){if(s=t,!(null!=(n=e)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](s):s instanceof n))throw new TypeError("Cannot call a class as a function");var s,n}const v=function t(e,s){return!s&&i?new Map(e):(g(this,t),this[r]=[],function(t,e){if(null!=e){if(!Object(n.d)(e))throw new Error("value:"+String(e)+" is not iterable");for(const s of e){if(!s||2!==s.length)throw new Error("invalid arg");t.set(s[0],s[1])}}}(this,e),this)};var y;(y=v).prototype.set=function(t,e){const s=f(this,t);return s?s[1]=e:this[r].push([h(t),e]),this},y.prototype.has=function(t){return!!f(this,t)},y.prototype.delete=function(t){let e=!1;return this[r]=this[r].filter(s=>{const n=!c(s[0],t);return n||(e=!0),n}),e},y.prototype.get=function(t){const e=f(this,t);return e?e[1]:void 0},y.prototype.forEach=function(t,e){for(const s of this[r]){const n=s[1],o=s[0],i=this;e?t.call(e,n,o,i):t(n,o,i)}},y.prototype.clear=function(){this[r].length=0},Object.defineProperty(y.prototype,"size",{enumerable:!1,configurable:!0,get:function(){return this[r].length}}),"undefined"!=typeof Symbol&&(y.prototype[Symbol.iterator]=b.entries,y.prototype[Symbol.toStringTag]="Map"),Object(m.a)(y.prototype,b),v[Symbol.species]=v;e.a=v},253:function(t,e,s){"use strict";s.r(e);var n=s(5),o=s.n(n),i=s(0),r=s(226);let a;if(window.customElements){const t="size",e=document.createElement("template");e.innerHTML='<style>.spinner{margin:auto;height: 50px; width: 50px; animation: rotate 0.8s infinite linear; border: 6px solid var(--background-color); border-right-color: var(--primary-color); border-radius: 50%;}@keyframes rotate{from{transform: rotate(0deg);}to{transform: rotate(360deg);}}</style><div class="spinner"></div>';const s=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;Object.defineProperty(t,s,{enumerable:!0,get(){const t=this.getAttribute(e);return null===t?"":t},set(t){this.setAttribute(e,t)}})};!window.customElements.get("loading-spinner")&&window.customElements.define("loading-spinner",class extends HTMLElement{constructor(){super();const n=e.content.cloneNode(!0),o=this.attachShadow({mode:"open"});o.appendChild(n),s(this,t),this.div=o.querySelector(".spinner")}static get observedAttributes(){return[t]}attributeChangedCallback(e,s,n){if(e===t&&n!==s){const t=this.div.style;t.height=t.width="string"==typeof n&&n.includes("px")?n:"".concat(n,"px")}}}),a=Object(i.h)("loading-spinner",{size:55})}else a="Connecting to the server";function c(){return Object(i.h)(i.d,null,a)}s(108);var h=s(223),u=s(229);const l="data:text/html;base64,PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5IHN0eWxlPSJtYXJnaW46YXV0bztjb2xvcjogI2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OmJvbGQ7YmFja2dyb3VuZC1jb2xvcjogIzAwMDsiPkxvYWRpbmcuLi48L2JvZHk+PC9odG1sPg==",d=new u.a;console.log("video player cache:",d);const p=t=>{if(!t||"none"===t.toLowerCase())return null;let e;try{(e=new URL(t,"".concat(location.protocol,"//").concat(location.hostname))).protocol="https:",e=e.toString()}catch(s){e=t,t.startsWith("//")&&(e="https:".concat(e))}return e},b=async t=>{const e=await h.a.post("/api/get-show-metadata/",!0,{id:t},{"content-type":"application/json"}),s=await e.json();if(!s.movie_name||s.error)throw new Error;return{movie:s.movie_name,episode_meta:s.episode_meta}},m=Object(i.h)("div",null,"No show exists with the given ID"),f=async t=>{const e=d.get(t);if(e)return console.log("refreshing cache in background"),b(t).then(e=>d.set(t,e)),e;{const e=await b(t);return d.set(t,e),e}};function g(t){return new URL(t).hostname}var v=s(98);class y extends i.i{constructor(){super(...arguments),o()(this,"state",{src:l,URLs:[],currentEp:0,previousEp:0}),o()(this,"componentDidUpdate",this.componentDidMount),o()(this,"setSrc",t=>this.setState({src:t})),o()(this,"_update",()=>this.setState({src:l})),o()(this,"setEpisode",(t,e)=>{this.setState(s=>({currentEp:t,previousEp:s.currentEp,URLs:e}))})}componentDidMount(){const t=this.props.movieName;if(t&&(document.title="Watch "+t),this.state.currentEp===this.state.previousEp&&0==this.state.currentEp)return w(1,this.setEpisode,this.props.id)();this.state.src!==l&&this.state.URLs.includes(this.state.src)||this.state.URLs.length&&this.setState({src:this.state.URLs[0]})}render(t,e){let{movieName:s,episodeMeta:n,id:o}=t,{URLs:r,currentEp:a}=e;return Object(i.h)(i.d,null,Object(i.h)("h2",{style:{fontWeight:"bold"}},Object(v.c)(s)),Object(i.h)("h2",{style:{fontWeight:"bold"}},"Now Playing Episode: ",a),r&&r.map(t=>Object(i.h)(O,{url:t,onClick:this.setSrc})),Object(i.h)("iframe",{class:"frame-src",src:this.state.src}),Object(i.h)(j,{data:n,updater:this.setEpisode,id:o,up:this._update}),r&&r.map(t=>Object(i.h)(S,{href:t})))}}function O(t){let{url:e,onClick:s}=t;return e?Object(i.h)("button",{onClick(){s(e)},class:"url-selector-button",style:{cursor:"pointer"}},g(e)):null}function S(t){let{href:e}=t;if(!e)return null;const s="/out?".concat(Object(v.k)({u:e}));return Object(i.h)(i.a,{href:s,class:["download-url-component","search-button"]},"Download from: ",g(e))}function j(t){let{data:e,updater:s,id:n,up:o}=t;return Object(i.h)("div",null,Array.from({length:e}).map((t,e)=>Object(i.h)("button",{class:"selector-button",onClick:w(e+1,s,n,o)},"Episode:",e+1)))}function w(t,e,s,n){return async function(){n&&n();const o=await h.a.post("/api/build-player/ep/",!0,{mid:s,eid:t},{"content-type":"application/json"}),i=await o.json();return e(t,[i.url,i.alt1,i.alt2].map(p))}}class k extends i.i{constructor(){super(...arguments),o()(this,"state",{badId:!1,fetchingDetails:!1,movieName:"",episodeMeta:0}),o()(this,"componentDidUpdate",this.componentDidMount)}render(t,e){let{id:s}=t,{badId:n,fetchingDetails:o,movieName:r,episodeMeta:a}=e;return n||!r&&!o?m:o?Object(i.h)("div",{"data-fetch":JSON.stringify(this.props)},"Loading TV Data",Object(i.h)("div",null,Object(i.h)(c))):Object(i.h)(y,{movieName:r,id:s,episodeMeta:a})}componentDidMount(t){const e=this.props.id;if(e||this.setState({badId:!0}),!(this.state.fetchingDetails||t&&t.id===this.props.id))return this.setState({badId:!1,fetchingDetails:!0}),f(e).then(t=>this.setState({episodeMeta:t.episode_meta,badId:!1,fetchingDetails:!1,movieName:t.movie})).catch(t=>console.log(t)||this.setState({badId:!0,fetchingDetails:!1}))}}s.d(e,"default",(function(){return E}));class E extends i.i{constructor(){super(...arguments),o()(this,"state",{badId:!1})}get movieId(){return new URLSearchParams(i.e.getQs).get("id")}getChildren(t,e){let{}=t,{badId:s}=e;const n=this.movieId;return s||!n?m:Object(i.h)(k,{id:n})}render(t,e){return Object(i.h)(i.d,null,Object(i.h)(r.a),Object(i.h)("section",{data:"player-component"},this.getChildren(t,e)))}}}}]);