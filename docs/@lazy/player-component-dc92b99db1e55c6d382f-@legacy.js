(window.webpackJsonp=window.webpackJsonp||[]).push([[5,12],{356:function(t,e,n){var r=n(46),o=n(139);t.exports=r?o:function(t){return Map.prototype.entries.call(t)}},357:function(t,e,n){"use strict";n.r(e),n.d(e,"Requests",(function(){return c}));n(29),n(48);var r=n(62),o=n.n(r),a=n(49),i=n.n(a),s=(n(129),n(128)),c={get:function(t,e,n){var r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return void 0===e&&(e=!0),void 0===n&&(n={}),r=e?""+s.a+t:t,o.next=5,i.a.awrap(fetch(r,{headers:n,credentials:"include"}));case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}))},post:function(t,e,n,r){var a,c;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return void 0===e&&(e=!0),void 0===r&&(r={"content-type":"application/x-www-form-urlencoded"}),c="application/json"===r["content-type"].toLowerCase()&&"object"==typeof n?o()(n):n,a=e?""+s.a+t:t,u.next=6,i.a.awrap(fetch(a,{method:"post",body:c,headers:r,credentials:"include"}));case 6:return u.abrupt("return",u.sent);case 7:case"end":return u.stop()}}))}}},359:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(28),o=n.n(r),a=n(8),i=n.n(a),s=n(25),c=n.n(s),u=n(11),p=n.n(u),l=n(0),f=function(t){function e(){for(var e,n,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=t.call.apply(t,o()(e=[this]).call(e,a))||this,p()(i()(n),"state",{isFocused:!1,value:""}),p()(i()(n),"onFocus",(function(){return!n.state.value&&n.setState({isFocused:!0})})),p()(i()(n),"onBlur",(function(){return!n.state.value&&n.setState({isFocused:!1})})),p()(i()(n),"onInput",(function(t){return n.setState({value:t.target.value})})),p()(i()(n),"onSubmit",(function(){return n.props.onSubmit(n.state.value)})),n}return c()(e,t),e.prototype.render=function(t,e){var n=this,r=t.id,o=t.buttonText,a=void 0===o?"search":o,i=t.labelText,s=void 0===i?"search for shows":i,c=t.onInput,u=t.wssResponse,p=["_animate",e.isFocused?"moveup":"movedown"];return Object(l.h)("div",{class:"search-component"},Object(l.h)("form",{action:"javascript:",onSubmit:this.onSubmit},Object(l.h)("label",{class:p,for:r},s),Object(l.h)(h,{onFocus:this.onFocus,onBlur:this.onBlur,id:r,onInput:function(t){n.onInput(t),null!=c&&c(t)}}),u,Object(l.h)("button",{class:"search-button"},a)))},e}(l.i);function h(t){var e=t.onFocus,n=t.onBlur,r=t.onInput,o=t.id;return Object(l.h)("input",{onFocus:e,onBlur:n,onInput:r,id:o,class:"paper-input"})}},360:function(t,e,n){"use strict";var r,o,a=n(363),i=n.n(a),s=n(28),c=n.n(s),u=n(8),p=n.n(u),l=n(25),f=n.n(l),h=n(11),d=n.n(h),v=n(0),g=n(359),b=n(128),m=(n(29),n(48),n(49)),y=n.n(m),w=(n(129),n(34)),x=n.n(w),O=n(62),j=n.n(O),S=n(15),k=n.n(S),M=n(72),W=n.n(M),E=n(130),I=n.n(E),N=function(){function t(){}var e=t.prototype;return e.__defaultOnMessage=function(t){var e;if(!W()(e=["ping","pong"]).call(e,t.data)){var n=JSON.parse(t.data);this._socketID=n.socket_id}},e.startConn=function(t){var e,n=this;return this.socket&&W()(e=[WebSocket.OPEN,WebSocket.CONNECTING]).call(e,this.socket.readyState)?this.socket:new k.a((function(e,r){n.socket=new WebSocket(Object(b.h)(t)),n.socket.onopen=function(){n.socket.onmessage=n.__defaultOnMessage,e(n.socket)},n.socket.onerror=function(t){return r(t)}}))},e.close=function(){try{this.socket.close()}catch(t){console.warn(t)}},e.send=function(t){return this.socket.send(j()(t))},e.sendString=function(t){return this.socket.send(t)},I()(t,[{key:"onmessage",set:function(t){var e=this;t!==this._onmessage&&(this._onmessage=t,this.socket.onmessage=function(t){var n=JSON.parse(t.data||"{}");return"ping"===n.type||"pong"===n.type?void 0:e._onmessage(n)})}},{key:"readyState",get:function(){return this.socket.readyState}},{key:"isUsable",get:function(){var t;return!this.socket||W()(t=[WebSocket.OPEN,WebSocket.CONNECTING]).call(t,this.socket.readyState)}},{key:"isConnected",get:function(){var t;return!!this.socket&&W()(t=[WebSocket.OPEN,WebSocket.CONNECTING]).call(t,this.socket.readyState)}}]),t}(),C=function(){return(r||{}).isUsable?r:r=new N},_=function(t){function e(){for(var e,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=t.call.apply(t,c()(e=[this]).call(e,o))||this,d()(p()(n),"state",{resp:[],prevVal:""}),d()(p()(n),"onMessage",(function(t){var e;t.data?n.setState({resp:x()(e=t.data).call(e,(function(t){return{movie:t.movie,href:Object(b.e)(t.id,t.movie)}}))}):n.setState({resp:[]})})),d()(p()(n),"componentWillUpdate",Object(b.b)(n.fetchResponses,100,!1,p()(n))),d()(p()(n),"componentWillMount",n.componentWillUpdate),n}f()(e,t);var n=e.prototype;return n.fetchResponses=function(){var t,e;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.props.val,e=this.state.prevVal,t!=e&&t){n.next=5;break}return this.state.resp.length&&!t&&this.setState({resp:[],prevVal:""}),n.abrupt("return");case 5:return console.log("fetching"),this.setState({prevVal:t}),o=C(),n.next=10,y.a.awrap(o.startConn("suggestqueries"));case 10:o.onmessage=this.onMessage,o.sendString(t);case 12:case"end":return n.stop()}}),null,this)},n.render=function(){var t,e=["response-parent"];return this.state.resp.length&&e.push("has-data"),Object(v.h)("div",{class:e},x()(t=this.state.resp).call(t,(function(t){return Object(v.h)(v.a,{class:["movie-link","query-response"],href:t.href},Object(b.c)(t.movie))})))},e}(v.i);n.d(e,"a",(function(){return R}));var R=function(t){function e(){for(var e,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=t.call.apply(t,c()(e=[this]).call(e,o))||this,d()(p()(n),"state",{value:""}),d()(p()(n),"onInput",(function(t){var e,r=i()(e=t.target.value||"").call(e);document.title=r?"Search for "+r:b.d,n.setState({value:r})})),d()(p()(n),"loadSearchResults",(function(){var t,e=n.state.value,r=i()(t=e||"").call(t);r&&Object(b.g)(r),n.setState({value:""})})),n}f()(e,t);var n=e.prototype;return n.componentWillMount=function(){C().startConn("suggestqueries")},n.render=function(){return Object(v.h)(v.d,null,Object(v.h)(g.a,{id:"landing-search-component",onSubmit:this.loadSearchResults,wssResponse:Object(v.h)(_,{val:this.state.value}),onInput:this.onInput}))},e}(v.i)},366:function(t,e,n){"use strict";var r=n(21);t.exports=function(t,e){var n,o=r(this),a=arguments.length>2?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof a)throw TypeError("At least one callback required");return o.has(t)?(n=o.get(t),"function"==typeof e&&(n=e(n),o.set(t,n))):"function"==typeof a&&(n=a(),o.set(t,n)),n}},367:function(t,e,n){t.exports=n(414)},368:function(t,e,n){var r=n(367);function o(e,n){return t.exports=o=r||function(t,e){return t.__proto__=e,t},o(e,n)}t.exports=o},383:function(t,e,n){var r=n(207),o=n(384),a=n(409),i=n(368),s=n(417),c=n(418);function u(e){var n="function"==typeof o?new o:void 0;return t.exports=u=function(t){if(null===t||!s(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,a(this).constructor)}return e.prototype=r(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},u(e)}t.exports=u},384:function(t,e,n){t.exports=n(385)},385:function(t,e,n){t.exports=n(370),n(386),n(388),n(390),n(392),n(393),n(394),n(395),n(396),n(397),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408)},386:function(t,e,n){n(1)({target:"Map",stat:!0},{from:n(387)})},387:function(t,e,n){"use strict";var r=n(33),o=n(47),a=n(127);t.exports=function(t){var e,n,i,s,c=arguments.length,u=c>1?arguments[1]:void 0;return r(this),(e=void 0!==u)&&r(u),null==t?new this:(n=[],e?(i=0,s=o(u,c>2?arguments[2]:void 0,2),a(t,(function(t){n.push(s(t,i++))}))):a(t,n.push,n),new this(n))}},388:function(t,e,n){n(1)({target:"Map",stat:!0},{of:n(389)})},389:function(t,e,n){"use strict";t.exports=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}},390:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(391);r({target:"Map",proto:!0,real:!0,forced:o},{deleteAll:function(){return a.apply(this,arguments)}})},391:function(t,e,n){"use strict";var r=n(21),o=n(33);t.exports=function(){for(var t,e=r(this),n=o(e.delete),a=!0,i=0,s=arguments.length;i<s;i++)t=n.call(e,arguments[i]),a=a&&t;return!!a}},392:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(47),s=n(356),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{every:function(t){var e=a(this),n=s(e),r=i(t,arguments.length>1?arguments[1]:void 0,3);return!c(n,(function(t,n){if(!r(n,t,e))return c.stop()}),void 0,!0,!0).stopped}})},393:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(35),i=n(21),s=n(33),c=n(47),u=n(131),p=n(356),l=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{filter:function(t){var e=i(this),n=p(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),o=new(u(e,a("Map"))),f=s(o.set);return l(n,(function(t,n){r(n,t,e)&&f.call(o,t,n)}),void 0,!0,!0),o}})},394:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(47),s=n(356),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{find:function(t){var e=a(this),n=s(e),r=i(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n){if(r(n,t,e))return c.stop(n)}),void 0,!0,!0).result}})},395:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(47),s=n(356),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{findKey:function(t){var e=a(this),n=s(e),r=i(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n){if(r(n,t,e))return c.stop(t)}),void 0,!0,!0).result}})},396:function(t,e,n){"use strict";var r=n(1),o=n(127),a=n(33);r({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;a(e);var r=a(n.has),i=a(n.get),s=a(n.set);return o(t,(function(t){var o=e(t);r.call(n,o)?i.call(n,o).push(t):s.call(n,o,[t])})),n}})},397:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(356),s=n(398),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{includes:function(t){return c(i(a(this)),(function(e,n){if(s(n,t))return c.stop()}),void 0,!0,!0).stopped}})},398:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},399:function(t,e,n){"use strict";var r=n(1),o=n(127),a=n(33);r({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;a(e);var r=a(n.set);return o(t,(function(t){r.call(n,e(t),t)})),n}})},400:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(356),s=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{keyOf:function(t){return s(i(a(this)),(function(e,n){if(n===t)return s.stop(e)}),void 0,!0,!0).result}})},401:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(35),i=n(21),s=n(33),c=n(47),u=n(131),p=n(356),l=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{mapKeys:function(t){var e=i(this),n=p(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),o=new(u(e,a("Map"))),f=s(o.set);return l(n,(function(t,n){f.call(o,r(n,t,e),n)}),void 0,!0,!0),o}})},402:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(35),i=n(21),s=n(33),c=n(47),u=n(131),p=n(356),l=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{mapValues:function(t){var e=i(this),n=p(e),r=c(t,arguments.length>1?arguments[1]:void 0,3),o=new(u(e,a("Map"))),f=s(o.set);return l(n,(function(t,n){f.call(o,t,r(n,t,e))}),void 0,!0,!0),o}})},403:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(33),s=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{merge:function(t){for(var e=a(this),n=i(e.set),r=0;r<arguments.length;)s(arguments[r++],n,e,!0);return e}})},404:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(33),s=n(356),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{reduce:function(t){var e=a(this),n=s(e),r=arguments.length<2,o=r?void 0:arguments[1];if(i(t),c(n,(function(n,a){r?(r=!1,o=a):o=t(o,a,n,e)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return o}})},405:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(47),s=n(356),c=n(127);r({target:"Map",proto:!0,real:!0,forced:o},{some:function(t){var e=a(this),n=s(e),r=i(t,arguments.length>1?arguments[1]:void 0,3);return c(n,(function(t,n){if(r(n,t,e))return c.stop()}),void 0,!0,!0).stopped}})},406:function(t,e,n){"use strict";var r=n(1),o=n(46),a=n(21),i=n(33);r({target:"Map",proto:!0,real:!0,forced:o},{update:function(t,e){var n=a(this),r=arguments.length;i(e);var o=n.has(t);if(!o&&r<3)throw TypeError("Updating absent value");var s=o?n.get(t):i(r>2?arguments[2]:void 0)(t,n);return n.set(t,e(s,t,n)),n}})},407:function(t,e,n){"use strict";n(1)({target:"Map",proto:!0,real:!0,forced:n(46)},{upsert:n(366)})},408:function(t,e,n){"use strict";n(1)({target:"Map",proto:!0,real:!0,forced:n(46)},{updateOrInsert:n(366)})},409:function(t,e,n){var r=n(410),o=n(367);function a(e){return t.exports=a=o?r:function(t){return t.__proto__||r(t)},a(e)}t.exports=a},410:function(t,e,n){t.exports=n(411)},411:function(t,e,n){t.exports=n(412)},412:function(t,e,n){n(413);var r=n(12);t.exports=r.Object.getPrototypeOf},413:function(t,e,n){var r=n(1),o=n(10),a=n(31),i=n(134),s=n(204);r({target:"Object",stat:!0,forced:o((function(){i(1)})),sham:!s},{getPrototypeOf:function(t){return i(a(t))}})},414:function(t,e,n){t.exports=n(415)},415:function(t,e,n){n(416);var r=n(12);t.exports=r.Object.setPrototypeOf},416:function(t,e,n){n(1)({target:"Object",stat:!0},{setPrototypeOf:n(205)})},417:function(t,e,n){var r=n(206);t.exports=function(t){var e;return-1!==r(e=Function.toString.call(t)).call(e,"[native code]")}},418:function(t,e,n){var r=n(419),o=n(421),a=n(368);function i(e,n,s){return!function(){if("undefined"==typeof Reflect||!o)return!1;if(o.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(o(Date,[],(function(){}))),!0}catch(t){return!1}}()?t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(r(Function).apply(t,o));return n&&a(i,n.prototype),i}:t.exports=i=o,i.apply(null,arguments)}t.exports=i},419:function(t,e,n){t.exports=n(420)},420:function(t,e,n){t.exports=n(208)},421:function(t,e,n){t.exports=n(422)},422:function(t,e,n){t.exports=n(423)},423:function(t,e,n){n(424);var r=n(12);t.exports=r.Reflect.construct},424:function(t,e,n){var r=n(1),o=n(35),a=n(33),i=n(21),s=n(16),c=n(95),u=n(209),p=n(10),l=o("Reflect","construct"),f=p((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),h=!p((function(){l((function(){}))})),d=f||h;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){a(t),i(e);var n=arguments.length<3?t:a(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var o=n.prototype,p=c(s(o)?o:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},435:function(t,e,n){"use strict";n.r(e),n.d(e,"LoadingSpinner",(function(){return w})),n.d(e,"default",(function(){return w}));var r,o=n(72),a=n.n(o),i=n(130),s=n.n(i),c=n(8),u=n.n(c),p=n(25),l=n.n(p),f=n(383),h=n.n(f),d=n(140),v=n.n(d),g=n(0);if(window.customElements){var b="size",m=document.createElement("template");m.innerHTML='<style>.spinner{margin:auto;height: 50px; width: 50px; animation: rotate 0.8s infinite linear; border: 6px solid var(--background-color); border-right-color: var(--primary-color); border-radius: 50%;}@keyframes rotate{from{transform: rotate(0deg);}to{transform: rotate(360deg);}}</style><div class="spinner"></div>';var y=function(t,e,n){void 0===n&&(n=e),v()(t,n,{enumerable:!0,get:function(){var t=this.getAttribute(e);return null===t?"":t},set:function(t){this.setAttribute(e,t)}})};!window.customElements.get("loading-spinner")&&window.customElements.define("loading-spinner",function(t){function e(){var e;e=t.call(this)||this;var n=m.content.cloneNode(!0),r=e.attachShadow({mode:"open"});return r.appendChild(n),y(u()(e),b),e.div=r.querySelector(".spinner"),e}return l()(e,t),e.prototype.attributeChangedCallback=function(t,e,n){if(t===b&&n!==e){var r=this.div.style;r.height=r.width="string"==typeof n&&a()(n).call(n,"px")?n:n+"px"}},s()(e,null,[{key:"observedAttributes",get:function(){return[b]}}]),e}(h()(HTMLElement))),r=Object(g.h)("loading-spinner",{size:55})}else r="Connecting to the server";function w(){return Object(g.h)(g.d,null,r)}},473:function(t,e,n){t.exports=n(474)},474:function(t,e,n){t.exports=n(475)},475:function(t,e,n){var r=n(476),o=String.prototype;t.exports=function(t){var e=t.startsWith;return"string"==typeof t||t===o||t instanceof String&&e===o.startsWith?r:e}},476:function(t,e,n){n(477);var r=n(17);t.exports=r("String").startsWith},477:function(t,e,n){"use strict";var r=n(1),o=n(51),a=n(217),i=n(73),s=n(218),c="".startsWith,u=Math.min;r({target:"String",proto:!0,forced:!s("startsWith")},{startsWith:function(t){var e=String(i(this));a(t);var n=o(u(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return c?c.call(e,r,n):e.slice(n,n+r.length)===r}})},488:function(t,e,n){"use strict";n.r(e);var r=n(77),o=n.n(r),a=n(132),i=n.n(a),s=n(28),c=n.n(s),u=n(130),p=n.n(u),l=n(8),f=n.n(l),h=n(25),d=n.n(h),v=n(11),g=n.n(v),b=n(0),m=n(360),y=n(62),w=n.n(y),x=n(435),O=(n(141),n(29),n(48),n(142),n(49)),j=n.n(O),S=(n(129),n(473)),k=n.n(S),M=n(165),W=n.n(M),E=n(357),I=n(425),N="data:text/html;base64,PGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5IHN0eWxlPSJtYXJnaW46YXV0bztjb2xvcjogI2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OmJvbGQ7YmFja2dyb3VuZC1jb2xvcjogIzAwMDsiPkxvYWRpbmcuLi48L2JvZHk+PC9odG1sPg==",C=new I.a;console.log("video player cache:",C);var _=function(t){if(!t||"none"===t.toLowerCase())return null;var e;try{(e=new W.a(t,location.protocol+"//"+location.hostname)).protocol="https:",e=e.toString()}catch(n){e=t,k()(t).call(t,"//")&&(e="https:"+e)}return e},R=function(t){var e,n;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.a.awrap(E.Requests.post("/api/get-show-metadata/",!0,{id:t},{"content-type":"application/json"}));case 2:return e=r.sent,r.next=5,j.a.awrap(e.json());case 5:if((n=r.sent).movie_name&&!n.error){r.next=8;break}throw new Error;case 8:return r.abrupt("return",{movie:n.movie_name,episode_meta:n.episode_meta});case 9:case"end":return r.stop()}}))},D=Object(b.h)("div",null,"No show exists with the given ID");function L(t){return new W.a(t).hostname}var P=n(369),F=n.n(P),A=n(34),T=n.n(A),U=n(72),V=n.n(U),Z=n(128),q=function(t){function e(){for(var e,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=t.call.apply(t,c()(e=[this]).call(e,o))||this,g()(f()(n),"state",{src:N,URLs:[],currentEp:0,previousEp:0}),g()(f()(n),"componentDidUpdate",n.componentDidMount),g()(f()(n),"setSrc",(function(t){return n.setState({src:t})})),g()(f()(n),"_update",(function(){return n.setState({src:N})})),g()(f()(n),"setEpisode",(function(t,e){n.setState((function(n){return{currentEp:t,previousEp:n.currentEp,URLs:e}}))})),n}d()(e,t);var n=e.prototype;return n.componentDidMount=function(){var t,e=this.props.movieName;if(e&&(document.title="Watch "+e),this.state.currentEp===this.state.previousEp&&0==this.state.currentEp)return z(1,this.setEpisode,this.props.id)();this.state.src!==N&&V()(t=this.state.URLs).call(t,this.state.src)||this.state.URLs.length&&this.setState({src:this.state.URLs[0]})},n.render=function(t,e){var n=this,r=t.movieName,o=t.episodeMeta,a=t.id,i=e.URLs,s=e.currentEp;return Object(b.h)(b.d,null,Object(b.h)("h2",{style:{fontWeight:"bold"}},Object(Z.c)(r)),Object(b.h)("h2",{style:{fontWeight:"bold"}},"Now Playing Episode: ",s),i&&T()(i).call(i,(function(t){return Object(b.h)(J,{url:t,onClick:n.setSrc})})),Object(b.h)("iframe",{class:"frame-src",src:this.state.src}),Object(b.h)(G,{data:o,updater:this.setEpisode,id:a,up:this._update}),i&&T()(i).call(i,(function(t){return Object(b.h)(B,{href:t})})))},e}(b.i);function J(t){var e=t.url,n=t.onClick;return e?Object(b.h)("button",{onClick:function(){n(e)},class:"url-selector-button",style:{cursor:"pointer"}},L(e)):null}function B(t){var e=t.href;if(!e)return null;var n="/out?"+Object(Z.k)({u:e});return Object(b.h)(b.a,{href:n,class:["download-url-component","search-button"]},"Download from: ",L(e))}function G(t){var e,n=t.data,r=t.updater,o=t.id,a=t.up;return Object(b.h)("div",null,T()(e=F()({length:n})).call(e,(function(t,e){return Object(b.h)("button",{class:"selector-button",onClick:z(e+1,r,o,a)},"Episode:",e+1)})))}function z(t,e,n,r){return function(){var o,a,i;return j.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r&&r(),s.next=3,j.a.awrap(E.Requests.post("/api/build-player/ep/",!0,{mid:n,eid:t},{"content-type":"application/json"}));case 3:return a=s.sent,s.next=6,j.a.awrap(a.json());case 6:return i=s.sent,s.abrupt("return",e(t,T()(o=[i.url,i.alt1,i.alt2]).call(o,_)));case 8:case"end":return s.stop()}}))}}var Y=function(t){function e(){for(var e,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=t.call.apply(t,c()(e=[this]).call(e,o))||this,g()(f()(n),"state",{badId:!1,fetchingDetails:!1,movieName:"",episodeMeta:0}),g()(f()(n),"componentDidUpdate",n.componentDidMount),n}d()(e,t);var n=e.prototype;return n.render=function(t,e){var n=t.id,r=e.badId,o=e.fetchingDetails,a=e.movieName,i=e.episodeMeta;return r||!a&&!o?D:o?Object(b.h)("div",{"data-fetch":w()(this.props)},"Loading TV Data",Object(b.h)("div",null,Object(b.h)(x.LoadingSpinner))):Object(b.h)(q,{movieName:a,id:n,episodeMeta:i})},n.componentDidMount=function(t){var e=this,n=this.props.id;if(n||this.setState({badId:!0}),!(this.state.fetchingDetails||t&&t.id===this.props.id))return this.setState({badId:!1,fetchingDetails:!0}),function(t){var e,n;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e=C.get(t))){r.next=7;break}return console.log("refreshing cache in background"),R(t).then((function(e){return C.set(t,e)})),r.abrupt("return",e);case 7:return r.next=9,j.a.awrap(R(t));case 9:return n=r.sent,C.set(t,n),r.abrupt("return",n);case 12:case"end":return r.stop()}}))}(n).then((function(t){return e.setState({episodeMeta:t.episode_meta,badId:!1,fetchingDetails:!1,movieName:t.movie})})).catch((function(t){return console.log(t)||e.setState({badId:!0,fetchingDetails:!1})}))},e}(b.i);n.d(e,"default",(function(){return H}));var H=function(t){function e(){for(var e,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=t.call.apply(t,c()(e=[this]).call(e,o))||this,g()(f()(n),"state",{badId:!1}),n}d()(e,t);var n=e.prototype;return n.getChildren=function(t,e){i()(t);var n=e.badId,r=this.movieId;return n||!r?D:Object(b.h)(Y,{id:r})},n.render=function(t,e){return Object(b.h)(b.d,null,Object(b.h)(m.a),Object(b.h)("section",{data:"player-component"},this.getChildren(t,e)))},p()(e,[{key:"movieId",get:function(){return new o.a(b.e.getQs).get("id")}}]),e}(b.i)}}]);