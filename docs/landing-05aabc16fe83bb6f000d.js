(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{294:function(e,t,n){"use strict";var s=n(5),a=n.n(s),o=n(12),i=n.n(o),r=n(20),c=n(7),d=n(33);class h{__defaultOnMessage(e){if(["ping","pong"].includes(e.data))return;const t=JSON.parse(e.data);this._socketID=t.socket_id}startConn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((n,s)=>{this.socket=new WebSocket(Object(d.e)(e)),this.socket.onopen=(()=>{this.socket.onmessage=this.__defaultOnMessage,t&&this._pingPongs(),n(this.socket)}),this.socket.onerror=(e=>s(e))})}close(){try{this.socket.close()}catch(e){console.warn(e)}}send(e){return this.socket.send(JSON.stringify(e))}sendString(e){return this.socket.send(e)}set onmessage(e){this.socket.onmessage=(t=>{const n=JSON.parse(t.data||"{}");return"ping"===n.type||"pong"===n.type?void 0:e(n)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}_pingPongs(){this.pingtimer=setTimeout(()=>{this.socket.readyState===this.socket.OPEN?(this.send({type:"ping"}),this._pingPongs()):clearTimeout(this.pingtimer)},2e4)}constructor(){}}let u;const l=()=>(u||{}).isUsable?u:u=new h;var p=n(51);n.d(t,"b",function(){return b}),n.d(t,"a",function(){return w});const b=e=>void(document.title=e);class m extends r.b{update(){const e=this.getState.value;b(e?`Search for ${e}`:window.oldTitle),this.setDomAttrs({value:e},!1).updateDOMAttrs()}appendComponentOnResponse(e){this.socket.onmessage=this.onResponse=e.bind(this)}handleInput(e){var t=this;return i()(a.a.mark(function n(){var s,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=e.target.value,t.setState({value:s}),"/search/"===Object(p.b)(window.location.href).route&&Object(p.c)("q",s),!t.socket.isConnected&&t.socket.isUsable&&t.useSocket&&t.socket.startConn("suggestqueries",!1),(o=s.trim())&&t.useSocket&&t.socket.sendString(o);case 7:case"end":return n.stop()}},n,this)}))()}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}constructor(e){super("input",{value:""},[],{className:["paper-input"]}),this.useSocket=!!e,this.onResponse=(()=>void 0),this.socket={},e&&(this.socket=l(),this.beforeRender=(()=>{this.onResponse()}),this.onAttached=(()=>{!this.socket.isConnected&&this.socket.isUsable&&this.socket.startConn("suggestqueries",!1)})),this.attachEventListener("input",this.handleInput.bind(this)).attachEventListener("focus",this.handleFocus.bind(this)).attachEventListener("blur",this.handleBlur.bind(this))}}class v extends r.b{constructor(e){super("div",{},[new c.b(e)],{className:"_animate"})}update(){this.updateChildren(),(this.getState.value||"").trim()||this.getState.isFocused?this.addClassName("moveup").removeClassName("movedown"):this.removeClassName("moveup").addClassName("movedown"),this.updateDOMAttrs()}}const w=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new v(e),s=new m(t).bindData("value",n,"value",!1).bindData("isFocused",n,"isFocused",!1);return{component:new r.b("div",{},[n,s],{className:["search-component"]}),inputComponent:s,animatedInputComponent:n}}},295:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var s=n(7),a=n(51),o=n(20),i=n(33);const r=(e,t)=>{t.forEach((t,n)=>{const o=e[n],i=t.children[0],r=t.getState.id,c=s.b.find(r,i.$element)[0],d=o.id,h=o.movie;if(r===d)return;const u=`/watch?${Object(a.d)({id:d,show:h})}`;i.setDomAttrs({href:`#${u}`},!1),t.setState({id:d,showName:h},!1),c.data=h,c.tag=d})},c=new o.b("div",{},[],{class:["response-parent"]}),d=e=>{if(!e)return c.removeClassName("has-data"),c.destroyChildComponents(!1,!0),c;c.addClassName("has-data");const t=(e=>{let t;if("string"==typeof e&&(s.e&&console.warn("return response as an object!"),t=JSON.parse(e)),(t=e)["no-res"])return[];return t.data||[]})(e),n=t.length;n||c.removeClassName("has-data");const h=c.children.length;if(n===h)r(t,c.children);else if(n>h){const e=t.splice(h,n);r(t,c.children);const v=(e=>{const t=[];var n=!0,r=!1,c=void 0;try{for(var h,u=e[Symbol.iterator]();!(n=(h=u.next()).done);n=!0){const e=h.value,n=e.id,r=e.movie,c=`/watch?${Object(a.d)({id:n,show:Object(i.h)(r)})}`,u=new o.b("div",{id:n,showName:r},[],{className:"query-response"}),l=new o.b("a",{},[new s.b(r,n)],{href:`#${c}`,className:"show-link"}).attachEventListener("click",()=>{d(),Object(a.a)(`/watch?${Object(a.d)({id:u.getState.id,show:Object(i.h)(u.getState.showName)})}`)});u.addChild(l),t.push(u)}}catch(e){r=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw c}}return t})(e);var u=!0,l=!1,p=void 0;try{for(var b,m=v[Symbol.iterator]();!(u=(b=m.next()).done);u=!0){const e=b.value;c.addChild(e)}}catch(e){l=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(l)throw p}}}else{const e=c.children.splice(n,h);r(t,c.children),e.forEach(e=>e.destroyComponent())}c.update()}},296:function(e,t,n){"use strict";n.r(t);var s=n(20),a=n(7),o=n(294),i=n(51),r=n(295),c=n(5),d=n.n(c),h=n(12),u=n.n(h),l=n(88),p=n(33);n.d(t,"animatedInputComponent",function(){return v}),n.d(t,"handleInput",function(){return w}),n.d(t,"handleKeyDown",function(){return f}),n.d(t,"searchButtonComponent",function(){return g}),n.d(t,"asYouTypeComponent",function(){return k}),n.d(t,"handleButtonClick",function(){return S});const b=new s.b("div",{},[new a.b("NEW! Add a new show to our databases by yourself"),new s.b("a",{},[new a.b("Here!")],{className:["banner-button","database-linker"],href:"#/media/add/"}).attachEventListener("click",e=>{e.preventDefault(),e.ctrlKey||Object(i.a)("/media/add/")})]),m=new s.b("div").addChild(Object(r.a)()),v=Object(o.a)("Search For TV Shows");function w(e){let t=e.target.value;v.inputComponent.handleInput.call(this,{target:{value:t}}),t.trim()||Object(r.a)(),v.inputComponent.appendComponentOnResponse(r.a)}function f(e){if(85===e.keyCode&&e.ctrlKey)e.preventDefault(),v.inputComponent.setState({value:""}),Object(r.a)();else if(13===e.keyCode){const e=this.getState.value||"";e.trim()&&Object(i.a)(`/search?${Object(i.d)({q:e})}`)}}const g=new s.b("button",{},[new a.b("Search")],{class:"search-button"}).bindData("query",v.inputComponent,"value",!1),k=new s.b("div",{},[v.component,m,g]),C=new s.b("div",{},[b,k,new s.b("div",{},[new a.b("Check some of these shows out")],{style:"display:block;margin-top: 50px;"})]);function S(){const e=this.getState.query;e&&e.trim()&&Object(i.a)(`/search?${Object(i.d)({q:e})}`)}C.addChild((new class extends s.b{futureAddOn(e){return this._parent=e,this}update(){var e=this;return u()(d.a.mark(function t(){var n,o,r,c,h,u,l,b,m,v;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getState.data,e.destroyChildComponents(!1,!0),o=!0,r=!1,c=void 0,t.prev=5,h=n[Symbol.iterator]();case 7:if(o=(u=h.next()).done){t.next=19;break}return l=u.value,t.next=11,Object(p.d)(l.thumb);case 11:b=t.sent,m=new s.b("div",{},[],{style:{"background-image":`url(${b})`},className:"rec-image"}),(v=new s.b("a",{url:l.id,name:l.movie},[m,new s.b("span",{},[new a.b(l.movie)],{className:"rec-title"})],{className:"rec-wrapper",href:`#/watch?${Object(i.d)({id:l.id,show:Object(p.h)(l.movie)})}`})).attachEventListener("click",function(e){e.ctrlKey||Object(i.a)(`/watch?${Object(i.d)({id:this.getState.url,show:Object(p.h)(this.getState.name)})}`)}.bind(v)),e.addChild(v);case 16:o=!0,t.next=7;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(5),r=!0,c=t.t0;case 25:t.prev=25,t.prev=26,o||null==h.return||h.return();case 28:if(t.prev=28,!r){t.next=31;break}throw c;case 31:return t.finish(28);case 32:return t.finish(25);case 33:e.updateChildren(e.$element);case 34:case"end":return t.stop()}},t,this,[[5,21,25,33],[26,,28,32]])}))()}constructor(){if(super("div",{data:[]},[],{class:"rec-box"}),this.beforeRender=console.log,this.onAttached=(()=>{this.setState({data:[]}),l.a.get("/i/rec/",!0).then(e=>e.json()).then(e=>this.setState({data:e.recommendations},!0)).catch(this.destroyComponent)}),!this.getState.data.length)for(let e=0;e<5;e++)this.children.push(new s.b("div",{},[new s.b("div",{},[],{className:"rec-image"}),new s.b("div",{},[],{className:"ghostText"})],{className:"rec-wrapper"}))}}).futureAddOn(C)),v.inputComponent.attachEventListener("input",w.bind(v.inputComponent),!0),C.onAttached=(()=>{Object(o.b)(window.oldTitle),v.inputComponent.attachEventListener("keydown",f.bind(v.inputComponent),!0),g.attachEventListener("click",S.bind(g),!0)});t.default=C}}]);