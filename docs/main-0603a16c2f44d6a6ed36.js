!function(t){function e(e){for(var r,i,a=e[0],c=e[1],l=e[2],u=0,d=[];u<a.length;u++)i=a[u],s[i]&&d.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(h&&h(e);d.length;)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={0:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var h=c;o.push([288,1]),n()}({285:function(t,e,n){},286:function(t,e,n){},287:function(t,e,n){},288:function(t,e,n){"use strict";n.r(e);var r=n(18),s=n.n(r),o=n(1),i=n.n(o),a=n(2),c=n.n(a);const l=(()=>"localhost"===location.hostname)(),h=t=>"object"==typeof t?t:t.split(" "),u=()=>void 0,d=t=>{if("string"==typeof t)return t;const e=[];for(var n=Object.keys(t),r=0;r<n.length;r++){const s=n[r];e.push(`${s}:${t[s]}`)}return e.join(";")},p={q(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?document.querySelector(t):Array.from(document.querySelectorAll(t))},id:t=>document.getElementById(t),className(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Array.from(document.getElementsByClassName(t));return e?n[0]:n},create(t,e){const n=document.createElement(t);return e&&"object"==typeof e&&m(n,e),n},get:(t,e)=>t.getAttribute(e),set(t,e,n){t.setAttribute(e,n)},empty(t){let e;for(e=t.lastChild;e;)t.removeChild(e),e=t.lastChild}};function m(t,e){for(var n=Object.entries(e),r=0;r<n.length;r++){const e=s()(n[r],2),d=e[0],p=e[1];switch(d){case"className":if("string"==typeof p)t.className=p;else{const e=Array.isArray(p)?p:[...p];var o=!0,i=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){const e=c.value;t.classList.contains(e)||t.classList.add(e)}}catch(t){i=!0,a=t}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}break;case"style":"string"==typeof p&&t.setAttribute("style","");const e=f(p);for(var h=Object.entries(e),u=0;u<h.length;u++){const e=s()(h[u],2),n=e[0],r=e[1];t.style[n]!==r&&(t.style[n]=r)}break;default:d in t?t[d]=p:t.getAttribute(d)!==p&&t.setAttribute(d,p)}}}const f=t=>{if("object"==typeof t)return t;return t.split(";").reduce((t,e)=>{const n=e.split(":"),r={};return 1<n.length?(r[n[0].trim()]=n[1].trim(),Object.assign(t,r)):t},{})},v=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];class w extends Text{constructor(t,e){super(t),this._condition=(()=>this.data),this.tag=e}toHTMLString(){return this.data}static find(t,e){return[...e.childNodes].filter(e=>e instanceof w&&e.tag===t)}set textCondition(t){this._condition=t}update(){const t=this._condition();this.data===t||(this.data=t)}render(t,e){if(e&&!this.isConnected)return this.isMountedTo=t,this.update(),t.appendChild(this)}shouldRender(){return!0}destroyComponent(){this.remove()}}let g=0;class y{constructor(){this.eventListeners={},this.hasUnAttachedEventListeners=!1}static createElement(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(()=>{if(!e)throw new Error("no parent element");if(n.isConnected)throw new Error("Cannot render a connected element. did you mean to call update()?");l&&console.log(`Render Called ${++g} times`);const o=t.element,i=t.children,a=t.props,c=p.create(o,a);var h=!0,u=!1,d=void 0;try{for(var m,f=i[Symbol.iterator]();!(h=(m=f.next()).done);h=!0){const t=m.value;try{t.shouldRender()&&t.render(c,!0)}catch(e){console.log(e,t,i)}}}catch(t){u=!0,d=t}finally{try{h||null==f.return||f.return()}finally{if(u)throw d}}if(n.isConnected=!0,n.isMountedTo=e,n.$element=c,n.wasEverMounted=!0,r&&e.appendChild(c),n.onAttached(!0),n.hasUnAttachedEventListeners)for(var v=Object.entries(n.eventListeners),w=0;w<v.length;w++){const t=s()(v[w],2),e=t[0],n=t[1];l&&console.log("Attaching listener:",e),c.addEventListener(e,n)}return c})()}attachEventListener(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.eventListeners[t];if(s&&this.isConnected){if(!n)throw new Error("Cannot append multiple listeners.. please combine them in a single function");this.$element.removeEventListener(t,s)}return this.eventListeners[t]=e,this.isConnected?(this.$element.addEventListener(t,e,{once:r}),this):(this.hasUnAttachedEventListeners=!0,this)}detachEventListener(t,e){return this.$element.removeEventListener(t,e),delete this.eventListeners[t],this}}y.componentToString=(t=>{const e=t.element,n=t.props,r=void 0===n?{}:n,o=t.children,i=void 0===o?[]:o;let a=[];for(var c=Object.entries(r||{}),h=0;h<c.length;h++){const t=s()(c[h],2),e=t[0],n=t[1];let r;const o=typeof n;if(["bigint","function","symbol"].includes(o))throw new Error(`Cannot convert type "${o}" to string`);switch(e){case"style":r=d(n);break;case"className":case"class":r=Array.isArray(n)?n.join(" "):n;break;default:if("object"===o)try{r=JSON.stringify(n)}catch(t){throw l&&console.error("JSON.stringify threw:",t),new Error(`Cannot serialize object typeof: "${o}"`)}else r=n.toString()}a.push(`${"className"===e?"class":e}="${r}"`)}let u=a.length?`<${e} ${a.join(" ")}`:`<${e}`;if(v.includes(e)){if((i||[]).length)throw new Error(`Self closing tag ${e} can not have child elements`);u+=" />"}else{u+=">";var p=!0,m=!1,f=void 0;try{for(var w,g=i[Symbol.iterator]();!(p=(w=g.next()).done);p=!0)u+=w.value.toHTMLString()}catch(t){m=!0,f=t}finally{try{p||null==g.return||g.return()}finally{if(m)throw f}}u+=`</${e}>`}return u});class b extends y{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(super(),this.DOMAttrs={},this.bindings={},this.wasEverMounted=!1,this.updateDOMAttrs=(()=>this.isConnected?m(this.$element,this.DOMAttrs):void 0),this.children=[],this.cleanUp=u,this.onAttached=(t=>void 0),this.beforeRender=u,this._props=e,this.element=t,this.children=n,v.includes(this.element)&&this.children.length)throw new Error(`Cannot add child elements to self closing element:${this.element}`);for(var i=Object.entries(o),a=0;a<i.length;a++){const t=s()(i[a],2),e=t[0],n=t[1];this.attachEventListener(e,n)}this.setDomAttrs(r,!1)}updateChildren(t){this.children.forEach(e=>{e.shouldRender()&&(e.isConnected?e.update():e.render(t))})}disconnectChildren(){this.children=[]}get preservedProps(){return{domAttrs:[],props:[]}}removeChild(t){const e=this.children.indexOf(t);e>-1&&(this.children.splice(e,1),t.destroyComponent(!1,!0))}destroyChildComponents(t,e){this.children.forEach(n=>{n.destroyComponent(t,e)}),e&&this.disconnectChildren()}toggleClassName(t){this.isConnected&&(this.$element.classList.contains(t)?this.$element.classList.remove(t):this.$element.classList.add(t),this.DOMAttrs.className=[...this.$element.classList])}addClassName(t){return this.DOMAttrs.className=h(this.DOMAttrs.className)||[],this.DOMAttrs.className.includes(t)||this.DOMAttrs.className.push(t),this.isConnected&&(this.$element.classList.contains(t)||this.$element.classList.add(t)),this}removeClassName(t){return this.DOMAttrs.className=h(this.DOMAttrs.className||[]),this.DOMAttrs.className=this.DOMAttrs.className.filter(e=>e!==t),this.isConnected&&this.$element.classList.remove(t),this}addChild(t,e){return this.children.push(t),e&&this.update(),this}setDomAttrs(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(this.DOMAttrs,t),e&&this.update(),this}set attachedCallback(t){this.onAttached=t}set beforeRenderCallback(t){this.beforeRender=t}set onDestroy(t){this.cleanUp=t}shouldRender(){return!0}update(){this.updateChildren(this.$element),this.updateDOMAttrs()}toHTMLString(){return b.componentToString({element:this.element,props:this.DOMAttrs,children:this.children})}renderChildrenOnly(){this.children.forEach(t=>t.render(this.$element))}render(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.beforeRender(),b.createElement({element:this.element,props:this.DOMAttrs,children:this.children},t,this,e)}destroyComponent(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;if(this.destroyChildComponents(t,e),this.isConnected)try{this.$element.remove()}catch(t){console.warn(t)}if(this.isConnected=this.isMountedTo=this.$element=null,!t){const t=this.preservedProps;this._props=(()=>{const e={};var n=!0,r=!1,s=void 0;try{for(var o,i=t.props[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){const t=o.value;e[t]=this._props[t]}}catch(t){r=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return e})(),this.eventListeners={},this.DOMAttrs=(()=>{const e={};var n=!0,r=!1,s=void 0;try{for(var o,i=t.domAttrs[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){const t=o.value;e[t]=this.DOMAttrs[t]}}catch(t){r=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return e})(),this.bindings={}}return this.cleanUp()}get getState(){return this._props}bindData(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=this.getState[t],o=this.bindings[t]||[],i=e.bindings[n]||[];if(o.push({component:e,prop:n}),this.bindings[t]=o,i.push({component:this,prop:t}),e.bindings[n]=i,r){const t={};t[n]=s,e.setState(t,!0,!0)}return this}updateBindings(){for(var t=Object.entries(this.bindings),e=0;e<t.length;e++){const c=s()(t[e],2),l=c[0],h=c[1];var n=!0,r=!1,o=void 0;try{for(var i,a=h[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){const t=i.value,e=t.component,n=t.prop,r={};r[n]=this.getState[l],e.setState(r,!0,!0)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return this}clearState(t){return this._props={},t&&this.update(),this}setState(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return Object.assign(this._props,t),n||this.updateBindings(),e&&this.update(),this}}const C=t=>window.URLSearchParams?new URLSearchParams(t).toString():`${Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}`,k=t=>{if("string"==typeof t)return"/"===t[0]?void(location.hash=t):void(location.hash=`/${t}`)},S=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;let e,n;if("#"===t[0])e=t.substr(1);else try{e=(n=new URL(t,`${location.protocol}//${location.host}`)).hash.substr(1)}catch(n){e="/",console.log(t)}const r=e.split("?"),s=[0===e.length?"/":r[0],r[1]],o=s[0],i=s[1];return{route:(t=>{const e=t.split("/").filter(t=>t)[0];return e?`/${e}/`:"/"})(o),path:o.split("/").filter(t=>t).slice(1),qs:new URLSearchParams(i)}},x=(t,e)=>{const n=S(window.location.href),r=n.qs;r.set(t,e);const s=`${n.route}${n.path.join("/")}?${r}`;k(s)},$=()=>{if("function"==typeof window.onhashchange)throw l&&console.error("Current Hashchange handler:",window.onhashchange),new Error("window already has a hashchange event listener. Have you re-initialized the router?");return!0},L=new b("a",{},[new w("Click to go Back")],{style:"color:#000;display:flex;margin:auto;text-align:center;flex-direction:column;text-decoration:underline",href:"/"});L.attachEventListener("click",function(t){t.preventDefault(),k("/")});const E={style:"color:#000000;cursor:pointer;font-weight:bold"},A={404:new b("div",{},[new w("No page exists with the given URL"),L],E),500:new b("div",{},[new w("An Error Occured while processing your Request..please try again"),L],E)};class N extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild((()=>Object.assign(document.createElement("style"),{innerHTML:":host{display:none}"}))())}}function O(t,e,n,r){t[e]=(e=>(console.log(n),new Function("$","$event",n).call(r,t,e)))}!function(t,e){if(!window.customElements.get(t))window.customElements.define(t,e)}("router-empty",N);n(118),n(285);const R=window.location.host.includes("localhost")?"localhost:5000":"show-box.herokuapp.com",D=t=>t.replace(/([^\w]|_)/g,"-").replace(/--/g,"-"),j=function(){var t=c()(i.a.mark(function t(e,n,r){var s,o,a,c=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=c.length>3&&void 0!==c[3]?c[3]:100,a=0;case 2:if(!(a<n)){t.next=17;break}return t.prev=3,t.next=6,e();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),o=t.t0;case 12:return t.next=14,(()=>new Promise(t=>setTimeout(()=>t(),s)))();case 14:a++,t.next=2;break;case 17:r(o);case 18:case"end":return t.stop()}},t,this,[[3,9]])}));return function(e,n,r){return t.apply(this,arguments)}}(),U=`${window.location.protocol}//${R}`,_=t=>`${"https:"===window.location.protocol?"wss://":"ws://"}${R}/${t}`,M=function(){var t=c()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",((n=document.createElement("link")).href=e,n.rel="stylesheet",document.head.appendChild(n)));case 4:t.prev=4,t.t0=t.catch(0),console.log("Could not append stylesheet",t.t0);case 7:case"end":return t.stop()}},t,this,[[0,4]])}));return function(e){return t.apply(this,arguments)}}();class P{__defaultOnMessage(t){if(["ping","pong"].includes(t.data))return;const e=JSON.parse(t.data);this._socketID=e.socket_id}startConn(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((n,r)=>{this.socket=new WebSocket(_(t)),this.socket.onopen=(()=>{this.socket.onmessage=this.__defaultOnMessage,e&&this._pingPongs(),n(this.socket)}),this.socket.onerror=(t=>r(t))})}close(){try{this.socket.close()}catch(t){console.warn(t)}}send(t){return this.socket.send(JSON.stringify(t))}sendString(t){return this.socket.send(t)}set onmessage(t){this.socket.onmessage=(e=>{const n=JSON.parse(e.data||"{}");return"ping"===n.type||"pong"===n.type?void 0:t(n)})}get readyState(){return this.socket.readyState}get isUsable(){return!this.socket||[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}get isConnected(){return!!this.socket&&[WebSocket.OPEN,WebSocket.CONNECTING].includes(this.socket.readyState)}_pingPongs(){this.pingtimer=setTimeout(()=>{this.socket.readyState===this.socket.OPEN?(this.send({type:"ping"}),this._pingPongs()):clearTimeout(this.pingtimer)},2e4)}constructor(){}}let T;const q=()=>(T||{}).isUsable?T:T=new P,H=t=>void(document.title=t);class I extends b{update(){const t=this.getState.value;H(t?`Search for ${t}`:window.oldTitle),this.setDomAttrs({value:t},!1).updateDOMAttrs()}appendComponentOnResponse(t){this.socket.onmessage=this.onResponse=t.bind(this)}handleInput(t){var e=this;return c()(i.a.mark(function n(){var r,s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.target.value,e.setState({value:r}),"/search/"===S(window.location.href).route&&x("q",r),!e.socket.isConnected&&e.socket.isUsable&&e.useSocket&&e.socket.startConn("suggestqueries",!1),(s=r.trim())&&e.useSocket&&e.socket.sendString(s);case 7:case"end":return n.stop()}},n,this)}))()}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}constructor(t){super("input",{value:""},[],{className:["paper-input"]}),this.useSocket=!!t,this.onResponse=(()=>void 0),this.socket={},t&&(this.socket=q(),this.beforeRender=(()=>{this.onResponse()}),this.onAttached=(()=>{!this.socket.isConnected&&this.socket.isUsable&&this.socket.startConn("suggestqueries",!1)})),this.attachEventListener("input",this.handleInput.bind(this)).attachEventListener("focus",this.handleFocus.bind(this)).attachEventListener("blur",this.handleBlur.bind(this))}}class W extends b{constructor(t){super("div",{},[new w(t)],{className:"_animate"})}update(){this.updateChildren(),(this.getState.value||"").trim()||this.getState.isFocused?this.addClassName("moveup").removeClassName("movedown"):this.removeClassName("moveup").addClassName("movedown"),this.updateDOMAttrs()}}const F=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new W(t),r=new I(e).bindData("value",n,"value",!1).bindData("isFocused",n,"isFocused",!1);return{component:new b("div",{},[n,r],{className:["search-component"]}),inputComponent:r,animatedInputComponent:n}};n(286);const B=(t,e)=>{e.forEach((e,n)=>{const r=t[n],s=e.children[0],o=e.getState.id,i=w.find(o,s.$element)[0],a=r.id,c=r.movie;if(o===a)return;const l=`/watch?${C({id:a,show:c})}`;s.setDomAttrs({href:`#${l}`},!1),e.setState({id:a,showName:c},!1),i.data=c,i.tag=a})},J=new b("div",{},[],{class:["response-parent"]}),K=t=>{if(!t)return J.removeClassName("has-data"),J.destroyChildComponents(!1,!0),J;J.addClassName("has-data");const e=(t=>{let e;if("string"==typeof t&&(l&&console.warn("return response as an object!"),e=JSON.parse(t)),(e=t)["no-res"])return[];return e.data||[]})(t),n=e.length;n||J.removeClassName("has-data");const r=J.children.length;if(n===r)B(e,J.children);else if(n>r){const t=e.splice(r,n);B(e,J.children);const l=(t=>{const e=[];var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){const t=o.value,n=t.id,r=t.movie,s=`/watch?${C({id:n,show:D(r)})}`,i=new b("div",{id:n,showName:r},[],{className:"query-response"}),a=new b("a",{},[new w(r,n)],{href:`#${s}`,className:"show-link"}).attachEventListener("click",()=>{K(),k(`/watch?${C({id:i.getState.id,show:D(i.getState.showName)})}`)});i.addChild(a),e.push(i)}}catch(t){r=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return e})(t);var s=!0,o=!1,i=void 0;try{for(var a,c=l[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){const t=a.value;J.addChild(t)}}catch(t){o=!0,i=t}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}}else{const t=J.children.splice(n,r);B(e,J.children),t.forEach(t=>t.destroyComponent())}J.update()};class X{static get(t){var e=arguments;return c()(i.a.mark(function n(){var r,s,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(e.length>1&&void 0!==e[1])||e[1],s=e.length>2&&void 0!==e[2]?e[2]:{},o=r?`${U}${t}`:t,n.next=5,fetch(o,{headers:s,credentials:"include"});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))()}static post(t){var e=arguments;return c()(i.a.mark(function n(){var r,s,o,a,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(e.length>1&&void 0!==e[1])||e[1],s=e.length>2?e[2]:void 0,o=e.length>3&&void 0!==e[3]?e[3]:{"content-type":"application/x-www-form-urlencoded"},c="application/json"===o["content-type"].toLowerCase()&&"object"==typeof s?JSON.stringify(s):s,a=r?`${U}${t}`:t,n.next=7,fetch(a,{method:"post",body:c,headers:o,credentials:"include"});case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n,this)}))()}}let Y;const G=function(){var t=c()(i.a.mark(function t(){var e,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.post("/api/get-integrity/",!0,{integrity:Y,$:!!Y},{"content-type":"application/json"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,Y=n.token,t.abrupt("return",Y);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();n(287);const Z=new b("div",{},[new w("NEW! Add a new show to our databases by yourself"),new b("a",{},[new w("Here!")],{className:["banner-button","database-linker"],href:"#/media/add/"}).attachEventListener("click",t=>{t.preventDefault(),t.ctrlKey||k("/media/add/")})]),V=new b("div").addChild(K()),z=F("Search For TV Shows");function Q(t){if(85===t.keyCode&&t.ctrlKey)t.preventDefault(),z.inputComponent.setState({value:""}),K();else if(13===t.keyCode){const t=this.getState.value||"";t.trim()&&k(`/search?${C({q:t})}`)}}const tt=new b("button",{},[new w("Search")],{class:"search-button"}).bindData("query",z.inputComponent,"value",!1),et=new b("div",{},[z.component,V,tt]),nt=new b("div",{},[Z,et,new b("div",{},[new w("Check some of these shows out")],{style:"display:block;margin-top: 50px;"})]);function rt(){const t=this.getState.query;t&&t.trim()&&k(`/search?${C({q:t})}`)}nt.addChild((new class extends b{futureAddOn(t){return this._parent=t,this}update(){const t=this.getState.data;this.destroyChildComponents(!1,!0);var e=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){const t=s.value,e=new b("div",{},[],{style:{"background-image":`url(${t.thumb})`},className:"rec-image"}),n=new b("a",{url:t.id,name:t.movie},[e,new b("span",{},[new w(t.movie)],{className:"rec-title"})],{className:"rec-wrapper",href:`#/watch?${C({id:t.id,show:D(t.movie)})}`});n.attachEventListener("click",function(t){t.ctrlKey||k(`/watch?${C({id:this.getState.url,show:D(this.getState.name)})}`)}.bind(n)),this.addChild(n)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.updateChildren(this.$element)}constructor(){if(super("div",{data:[]},[],{class:"rec-box"}),this.beforeRender=console.log,this.onAttached=(()=>{this.setState({data:[]}),X.get("/i/rec/",!0).then(t=>t.json()).then(t=>this.setState({data:t.recommendations},!0)).catch(this.destroyComponent)}),!this.getState.data.length)for(let t=0;t<5;t++)this.children.push(new b("div",{},[new b("div",{},[],{className:"rec-image"}),new b("div",{},[],{className:"ghostText"})],{className:"rec-wrapper"}))}}).futureAddOn(nt)),z.inputComponent.attachEventListener("input",function(t){let e=t.target.value;z.inputComponent.handleInput.call(this,{target:{value:e}}),e.trim()||K(),z.inputComponent.appendComponentOnResponse(K)}.bind(z.inputComponent),!0),nt.onAttached=(()=>{H(window.oldTitle),z.inputComponent.attachEventListener("keydown",Q.bind(z.inputComponent),!0),tt.attachEventListener("click",rt.bind(tt),!0)});const st=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>void 0;const r=new b("div",{},[],{className:"err-component-full-cover"}),s=new b("div",{},[new b("div",{},[new w(t)])],{className:"err-component-area"}).addChild(new b("button",{},[new w("Okay")],{className:"search-button"}).attachEventListener("click",()=>{r.destroyComponent(!1,!0),e.removeChild(s),n()}));r.addChild(s),r.render(e.$element)},ot=new b("div",{},[],{className:["rec-box"]}),it=function(){var t=c()(i.a.mark(function t(e){var n,r,s,o,a=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],(e||"").trim()){t.next=6;break}return t.abrupt("return",[]);case 6:return t.prev=6,r=X.post("/api/data/search/",!0,C({q:e})),n&&(ot.setDomAttrs({style:{"pointer-events":"none"}}),ot.children.forEach(t=>{t.setDomAttrs({href:""},!1),t.children[0].setDomAttrs({style:{"background-image":""}},!1),t.children[1].setDomAttrs({style:{display:"none"}},!1)}),ot.updateChildren()),t.next=11,r;case 11:return s=t.sent,t.next=14,s.json();case 14:return o=t.sent,t.abrupt("return",o.movies||[]);case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",[]);case 21:case"end":return t.stop()}},t,this,[[6,18]])}));return function(e){return t.apply(this,arguments)}}();function at(t){if(!t.ctrlKey)return t.preventDefault(),k(`/watch?${C({id:this.getState.id,show:D(this.getState.showName)})}`)}const ct=t=>{const e=[];var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){const t=o.value,n=t.id,r=t.movie,s=`/watch?${C({id:n,show:D(r)})}`,i=[new b("div",{},[],{style:{"background-image":`url(${t.thumb})`},className:"rec-image"}),new b("span",{},[new w(r,n)],{className:"rec-title"})],a=new b("a",{id:n,showName:r},i,{className:"rec-wrapper",href:`#${s}`});a.attachEventListener("click",at.bind(a)),e.push(a)}}catch(t){r=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return e},lt=(t,e)=>{e.forEach((e,n)=>{const r=t[n],s=e.children[0],o=e,i=e.getState.id,a=e.children[1];a.setDomAttrs({style:{display:""}},!1);const c=w.find(i,a.$element)[0],l=r.id,h=r.movie;if(o.setDomAttrs({style:{display:""}},!1),s.setDomAttrs({style:{"background-image":`url(${r.thumb})`}},!1),i===l)return;const u=`/watch?${C({id:l,show:h})}`;o.setDomAttrs({href:`#${u}`},!1),o.setState({id:l,showName:h},!1),c.data=h,c.tag=l})},ht=t=>{const e=(t||[]).length;if(ot.setDomAttrs({style:{"pointer-events":"auto"}}),!e)return ot.destroyChildComponents(!1,!0),ot;const n=ot.children.length;if(e===n)lt(t,ot.children);else if(e>n){const c=t.splice(n,e);lt(t,ot.children);const l=ct(c);var r=!0,s=!1,o=void 0;try{for(var i,a=l[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){const t=i.value;ot.addChild(t)}}catch(t){s=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(s)throw o}}}else{const r=ot.children.splice(e,n);lt(t,ot.children),r.forEach(t=>t.destroyComponent())}ot.update()},ut=et.children[et.children.length-1],dt=ht(),pt=new w("Searching"),mt=new b("div",{},[et,pt,dt]),ft=function(){var t=c()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it(e);case 2:(n=t.sent)&&n.length||st(`No Results found for your query:${e}`,dt),ht(n),pt.isConnected&&pt.destroyComponent();case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();mt.onAttached=(t=>{const e=S(location.href),n=z.inputComponent,r=n.getState.value,s=e.qs.get("q");t&&(K(),ft(s)),s!==r&&s&&(t||ft(s),n.setState({value:s})),ut.attachEventListener("click",function(){const t=(this.getState.query||"").trim();t&&(K(),ft(t))}.bind(ut),!0),n.attachEventListener("keydown",function(t){if(85===t.keyCode&&t.ctrlKey)t.preventDefault(),this.setState({value:""}),K();else if(13===t.keyCode){const t=(this.getState.value||"").trim();t&&(K(),ft(t))}}.bind(n),!0)});const vt=function(){var t=c()(i.a.mark(function t(e){var n,r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:return n=t.sent,t.next=5,X.post("/api/get-show-metadata/",!0,{token:n,id:e},{"content-type":"application/json"});case 5:return r=t.sent,t.next=8,r.json();case 8:return s=t.sent,t.abrupt("return",s);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),wt=function(){var t=c()(i.a.mark(function t(e,n){var r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:return r=t.sent,t.next=5,X.post("/api/build-player/ep/",!0,{nonce:r,eid:n,mid:e},{"content-type":"application/json"});case 5:return s=t.sent,t.next=8,s.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),gt="data:text/html;base64,PGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6c2Fucy1zZXJpZjttYXJnaW46YXV0bzt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpib2xkIj5Mb2FkaW5nIEVwaXNvZGUgRGF0YTwvZGl2Pg==",yt=t=>new URL(t).hostname,bt=t=>{if(!t)return null;let e;try{(e=new URL(t,`${location.protocol}//${location.hostname}`)).protocol="https:",e=e.toString()}catch(n){e=t,t.startsWith("//")&&(e=`https:${e}`)}return e},Ct=function(){var t=c()(i.a.mark(function t(e,n){var r,s,o,a,c,l,h,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wt(e,n);case 2:return r=t.sent,s=r.url,o=r.alt1,a=r.alt2,c={},l=bt(s),h=bt(o),u=bt(a),c.primaryURL=l||h||u,c.URLArray=[l,h,u].filter(t=>t),t.abrupt("return",c);case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}();const kt=new class extends b{update(){var t=this;return c()(i.a.mark(function e(){var n,r,s,o,a,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getState,r=n.currentEp,s=t.children[1],r!==n.previousEP&&(n.previousEP||!n.selectedURL||s.$element.src===n.selectedURL)){e.next=8;break}if(s.$element.src=gt,n.selectedURL){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",setTimeout(()=>n.selectedURL?s.setDomAttrs({src:n.selectedURL},!0):void 0,700));case 8:return e.next=10,Ct(n.showID,r);case 10:o=e.sent,a=o.URLArray,c=o.primaryURL,t.setState({previousEP:r},!1),t.setState({URLArray:a},!1),c&&(s.setDomAttrs({src:c},!1),t.children[0].data=`Now Playing: Episode:${r}`),t.updateChildren(t.$element),t.updateDOMAttrs();case 18:case"end":return e.stop()}},e,this)}))()}constructor(t,e,n,r,s){super(t,e,n,r,s)}}("div",{currentEp:null},[new w("","episode-id"),new b("iframe",{},[],{src:gt,className:"frame-src"})],{}),St=new class extends b{update(){const t=this.getState.URLArray;if(t){const a=this;function e(){const t=this.getState,e=t.url;console.log(t),a.setState({selectedURL:e})}this.destroyChildComponents(!1,!0);var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){const t=o.value,n=new b("button",{url:t},[new w(yt(t))],{className:"url-selector-button"});n.attachEventListener("click",e.bind(n)),this.addChild(n)}}catch(t){r=!0,s=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}}this.updateChildren(this.$element),this.updateDOMAttrs()}constructor(){super(...arguments)}}("div"),xt=new class extends b{update(){const t=this.getState.URLArray;if(this.destroyChildComponents(!1,!0),t){const i=new b("div");var e=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){const t=s.value,e=new b("button",{url:t},[new w(`Download:${yt(t)}`)],{className:"download-url-component"}).attachEventListener("click",()=>{k(`/out?${C({url:t})}`)});i.addChild(e,!1)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.addChild(i)}this.updateChildren(this.$element)}constructor(){super(...arguments)}}("div",{},[]),$t=(t,e)=>{const n=parseInt(e);for(let e=1;e<n+1;e++){const n=new b("button",{episode:e},[new w(`Episode ${e}`)],{className:"episode-button"});n.attachEventListener("click",()=>{t.setState({currentEp:n.getState.episode})}),t.addChild(n)}t.update()},Lt=new w(""),Et=new b("h2",{},[Lt],{style:"font-weight:bold"}),At=new b("div",{currentEp:null},[],{className:"episode-selector"}),Nt=new b("div",{},[et,Et,St,kt,At,xt]);kt.bindData("currentEp",At,"currentEp",!1),kt.bindData("URLArray",St,"URLArray",!1),kt.bindData("URLArray",xt,"URLArray",!1),kt.bindData("selectedURL",St,"selectedURL",!0),Nt.onDestroy=(()=>{At.destroyChildComponents(!1,!0)}),Nt.onAttached=c()(i.a.mark(function t(){var e,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Lt.textContent="Loading",z.inputComponent.attachEventListener("keydown",Q.bind(z.inputComponent),!0),e=S(location.href).qs,n=e.get("id"),t.next=6,vt(n);case 6:if(!(r=t.sent).error){t.next=9;break}return t.abrupt("return",st("No TV Show exists with the given ID",Nt,()=>Nt.destroyComponent(!0)));case 9:kt.setState({showID:n},!1),At.destroyChildComponents(!1,!0),$t(At,r.episode_meta),Lt.textContent=`Watch: ${r.movie_name}  (${r.episode_meta} episodes)`,At.setState({currentEp:1});case 14:case"end":return t.stop()}},t,this)})),kt.onDestroy=(()=>kt.clearState());const Ot=(t,e)=>`${t}${encodeURIComponent(e)}`,Rt=new b("div");Rt.CURRENT_AVAILABLE_WEBSITES={"PROXY-PY.HEROKUAPP.COM":"https://proxy-py.herokuapp.com/api/parse_query?url=","DL-JS.HEROKUAPP.COM":"https://dl-js.herokuapp.com/video/?url=","DL-PY.HEROKUAPP.COM":"https://dl-py.herokuapp.com/video/?url=","PROXY-DL.HEROKUAPP.COM":"https://proxy-dl.herokuapp.com/video?url="},Rt.onAttached=c()(i.a.mark(function t(){var e,n,r,o,a,c,l,h,u,d,p;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt.destroyChildComponents(!1,!0),e=S(location.href).qs.get("url")){t.next=4;break}return t.abrupt("return",Rt.addChild(new w("Bad URL")));case 4:return n=[],t.next=7,X.get("/api/site-select/");case 7:return r=t.sent,t.next=10,r.json();case 10:for(o=t.sent.site,a=Object.entries(Rt.CURRENT_AVAILABLE_WEBSITES),c=0;c<a.length;c++)l=s()(a[c],2),h=l[0],u=l[1],d=Ot(u,e),p=new b("a",{},[new w(h)],{href:`${U}/set-downloader/?${C({dl:d})}`,className:"download-set-url-links"}),n.push(p);Rt.$element.appendChild(new w("select a website")),Rt.children=[...n],Rt.update(),Rt.$element.appendChild(new w(`Previously Used Site - ${"None"===o?"None":new URL(o).hostname}`));case 17:case"end":return t.stop()}},t,this)}));const Dt=F("Press enter to search",!1),jt=Dt.inputComponent,Ut=new b("div",{},[Dt.component]),_t=t=>{t.attachEventListener("click",c()(i.a.mark(function t(){var e,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.get(`/api/add/tv-show/lookup?${C({s:this.getState.url})}`);case 2:return e=t.sent,t.next=5,e.text();case 5:n=t.sent,Ut.destroyChildComponents(!1,!0),Ut.$element.appendChild(new w(n)),(r=document.createElement("a")).href=`#/search?${C({q:title})}`,r.style.margin="auto",r.style.display="block",r.innerHTML=`Search for ${title}`,Ut.$element.appendChild(r);case 14:case"end":return t.stop()}},t,this)})).bind(t))};function Mt(){return(Mt=c()(i.a.mark(function t(e){var n,r,s,o,a,c,l,h,u,d,p,m,f,v,g;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==e.keyCode){t.next=44;break}if((n=w.find("$$",Ut.$element)[0])&&n.remove(),!(r=(e.target.value||"").trim())){t.next=44;break}return t.prev=5,t.next=8,X.get(`/media/add-shows/fetch/?${C({s:r})}`,!0);case 8:return o=t.sent,t.next=11,o.json();case 11:if(t.t0=t.sent,t.t0){t.next=14;break}t.t0={};case 14:a=t.t0,s=a.shows,t.next=20;break;case 18:t.prev=18,t.t1=t.catch(5);case 20:if(!s||!s.length){t.next=43;break}for(c=[],l=!0,h=!1,u=void 0,t.prev=25,d=s[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)m=p.value,f=m.title,v=m.url,g=new b("div",{url:v},[new w(f)],{style:"width:65%;margin:auto;text-decoration:underline;cursor:pointer"}),_t(g),c.push(g),Ut.addChild(new b("div",{},c)),Ut.update();t.next=33;break;case 29:t.prev=29,t.t2=t.catch(25),h=!0,u=t.t2;case 33:t.prev=33,t.prev=34,l||null==d.return||d.return();case 36:if(t.prev=36,!h){t.next=39;break}throw u;case 39:return t.finish(36);case 40:return t.finish(33);case 41:t.next=44;break;case 43:return t.abrupt("return",Ut.$element.appendChild(new w("No Results found","$$")));case 44:case"end":return t.stop()}},t,this,[[5,18],[25,29,33,41],[34,,36,40]])}))).apply(this,arguments)}jt.attachEventListener("keydown",function(t){return Mt.apply(this,arguments)}.bind(jt));const Pt=new b("div",{},[],{className:"rec-box"}),Tt=new b("div",{},[et,Pt],{});Tt.onAttached=c()(i.a.mark(function t(){var e,n,r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return z.inputComponent.attachEventListener("keydown",Q.bind(z.inputComponent),!0),tt.attachEventListener("click",rt.bind(tt),!0),t.next=4,G();case 4:return e=t.sent,t.next=7,X.post("/api/get-all/",!0,{token:e},{"content-type":"application/json"});case 7:return n=t.sent,t.next=10,n.json();case 10:r=t.sent,s=ct(r.movies),Pt.destroyChildComponents(!1,!0),s.forEach(t=>{Pt.addChild(t,!1)}),Pt.update();case 15:case"end":return t.stop()}},t,this)})),window.oldTitle=document.title;const qt=p.id("app-root"),Ht=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.id("app-root")||window.appRoot||document.body;this.routeList=[],this.routeData={},this.parseHash=S,this.startLoad=this.routeChange,this.load=k,this.root=t,$(),window.onhashchange=(t=>(this.navData=t,this._runDirectives(),this.routeChange())),this._runDirectives()}get statusHandler(){return A}routeChange(){const t=this.getRouteProps(location.href),e=t.res,n=t.actualRoute;if(t.args,e){const t=this.routeData[n],e=t.component;if(t.strictMatching&&!this.routeData[this.currentRoute+this.currentPath.join("/")])return this.mountComponent(this.statusHandler[404],this.root);this.mountComponent(e,this.root)}else this.mountComponent(this.statusHandler[404],this.root)}mountComponent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.currentComponent){if(this.currentComponent===t)return l&&console.log("Same Component..not mounting"),void t.onAttached(!1);this.currentComponent.destroyComponent(n)}t.render(e),this.currentComponent=t}getRouteProps(t){if(this.routeList.includes(t))return{res:!0,args:null,actualRoute:t};try{const e=this.parseHash(t),n=e.route;return this.routeList.includes(n)?{res:!0,args:e.path,actualRoute:n}:{res:!1}}catch(t){return console.log(t),{res:!1}}}isUserGoingBack(t){const e=this.navData||{};return`${location.protocol}//${location.host}/#${t}`===e.oldURL}registerComponent(t,e,n){if(!(e instanceof b))throw new Error("Can not register component please make sure your componentClass extends Component");this.routeData[t]={component:e,strictMatching:n},this.routeList.push(t)}get currentRoute(){return this.parseHash(location.href).route}get currentPath(){return this.parseHash(location.href).path}get currentQs(){return this.parseHash(location.href).qs}_runConditionals(){var t=this;return c()(i.a.mark(function e(){var n,r,s,o,a,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[...document.querySelectorAll("[_routerif]")],r=0;r<n.length;r++)s=n[r],o=p.get(s,"_routerif"),a=p.get(s,"_routerthen"),new Function("$",`return ${o}`).call(t,s)?(s instanceof N&&s.replaceWith(s.$),new Function("$",a).call(t,s)):s instanceof N||((c=new N).setAttribute("_routerif",o),c.$=s,s.replaceWith(c));case 2:case"end":return e.stop()}},e,this)}))()}_runListeners(){var t=this;return c()(i.a.mark(function e(){var n,r,s,o,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[...document.querySelectorAll("[_routerevt][_routeract]")],r=0;r<n.length;r++)s=n[r],o=p.get(s,"_routerevt"),a=p.get(s,"_routeract"),O(s,o,a,t);case 2:case"end":return e.stop()}},e,this)}))()}_runDirectives(){var t=this;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._runConditionals(),t._runListeners();case 2:case"end":return e.stop()}},e,this)}))()}}(qt);M("https://fonts.googleapis.com/css?family=Open+Sans");const It={"/":nt,"/search/":mt,"/watch/":Nt,"/out/":Rt,"/media/":Ut,"/all/":Tt};qt.innerHTML="Connecting to server",j(()=>X.get("/collect/"),3,()=>qt.innerHTML="could not connect",200).then(()=>{for(var t=Object.entries(It),e=0;e<t.length;e++){const n=s()(t[e],2),r=n[0],o=n[1];Ht.registerComponent(r,o)}qt.innerHTML="",Ht.startLoad()})}});